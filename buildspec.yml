version: 0.2
phases:
  install:
    runtime-versions:
      python: 3.8
  commands:
      - echo "Installing dependencies..."
        ./requirements.sh
  build:
  commands:
      # - cd /usr/lib
      #- zip -r9 lambda.zip lambda_function.py
      - echo "Packaging Lambda Function..."
      - zip -r /tmp/lambda_function.zip ./*
      - func_name=`echo $CODEBUILD_BUILD_ID | awk -F ':' '{print $1}'`-phantomjs
      - echo "Creating Lambda Function..."
      
  post_build:
    commands:
      - echo "Updating lambda Function..."
      - aws lambda update-function-code  --function-name  test1 --zip-file fileb://lambda.zip --region us-east-1
      - echo "DONE!!"
